{"pageProps":{"post":{"src":"nextjs/nextjs-error-page.mdx","type":"local","slug":"nextjs$nextjs-error-page","title":"NextJS Error Page Customization","date":"2021-12-12","tags":["nextjs","javascript","typescript","software"],"coverImage":"/imgs/nextjs-logo.webp","author":{"name":"peterhs.kang","picture":"/imgs/PK.png"},"status":"published","excerpt":"\n## Introduction\n\nNext.js provides a static 404 page by default without having to add any additional files.\nBut you should customize the error pages if you would like to render them with your own page layout.\n\n","categories":["nextjs"],"content":{"compiledSource":"var N=Object.defineProperty,d=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var r=Object.getOwnPropertySymbols;var t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;var l=(e,s,n)=>s in e?N(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,a=(e,s)=>{for(var n in s||(s={}))t.call(s,n)&&l(e,n,s[n]);if(r)for(var n of r(s))o.call(s,n)&&l(e,n,s[n]);return e},m=(e,s)=>d(e,h(s));var c=(e,s)=>{var n={};for(var p in e)t.call(e,p)&&s.indexOf(p)<0&&(n[p]=e[p]);if(e!=null&&r)for(var p of r(e))s.indexOf(p)<0&&o.call(e,p)&&(n[p]=e[p]);return n};const makeShortcode=e=>function(n){return console.warn(\"Component \"+e+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",a({},n))},AdSense=makeShortcode(\"AdSense\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var p=n,{components:e}=p,s=c(p,[\"components\"]);return mdx(MDXLayout,m(a(a({},layoutProps),s),{components:e,mdxType:\"MDXLayout\"}),mdx(\"h2\",a({},{id:\"introduction\"}),\"Introduction\"),mdx(\"p\",null,\"Next.js provides a static 404 page by default without having to add any additional files.\",mdx(\"br\",{parentName:\"p\"}),\"But you should customize the error pages if you would like to render them with your own page layout.\"),mdx(\"h2\",a({},{id:\"environment\"}),\"Environment\"),mdx(\"pre\",null,mdx(\"code\",a({parentName:\"pre\"},{className:\"hljs language-sh\"}),`% node --version\nv14.17.5\n% yarn --version\n1.22.11\n% egrep `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),`'(\"react\"|\"next\")'`),` package.json\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"next\"'),\": \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"~12.0.4\"'),`,\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"react\"'),\": \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"~17.0.2\"'),`,\n`)),mdx(\"h2\",a({},{id:\"how-to-customize-the-404-error-page\"}),\"How to customize the 404 error page\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"create a \",mdx(\"inlineCode\",{parentName:\"li\"},\"pages/404.jsx\"),\" (or .tsx) file.\")),mdx(\"pre\",null,mdx(\"code\",a({parentName:\"pre\"},{className:\"hljs language-js\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"// pages/404.jsx\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"export\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"default\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"function\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-title hljs-function\"}),\"Custom404\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-params\"})),`) {\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"return\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"xml\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-name\"}),\"h1\"),\">\"),\"404 - Page Not Found\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-name\"}),\"h1\"),\">\")),`;\n}\n`)),mdx(AdSense,{mdxType:\"AdSense\"}),mdx(\"h2\",a({},{id:\"how-to-customize-the-500-error-page\"}),\"How to customize the 500 error page\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"create a \",mdx(\"inlineCode\",{parentName:\"li\"},\"pages/500.jsx\"),\" (or .tsx) file.\")),mdx(\"pre\",null,mdx(\"code\",a({parentName:\"pre\"},{className:\"hljs language-js\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"// pages/500.jsx\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"export\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"default\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"function\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-title hljs-function\"}),\"Custom500\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-params\"})),`) {\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"return\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"xml\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-name\"}),\"h1\"),\">\"),\"500 - Server-side error occurred\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-name\"}),\"h1\"),\">\")),`;\n}\n`)),mdx(\"h2\",a({},{id:\"how-to-customize-all-error-pages\"}),\"How to customize all error pages\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"create a \",mdx(\"inlineCode\",{parentName:\"li\"},\"pages/_error.jsx\"),\" (or .tsx) file.\"),mdx(\"li\",{parentName:\"ul\"},\"N.B.\",mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},\"pages/_error.js is only used in production.\"),mdx(\"li\",{parentName:\"ul\"},\"In development you\\u2019ll get an error with the call stack to know where the error originated from.\")))),mdx(\"pre\",null,mdx(\"code\",a({parentName:\"pre\"},{className:\"hljs language-js\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"// pages/_error.jsx\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"function\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-title hljs-function\"}),\"Error\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-params\"}),\"{ statusCode }\"),`) {\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"return\"),` (\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"xml\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-name\"}),\"p\"),\">\"),`\n      {statusCode\n        ? \\`An error \\${statusCode} occurred on server\\`\n        : 'An error occurred on client'}\n    `,mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-name\"}),\"p\"),\">\")),`\n  );\n}\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-title hljs-class\"}),\"Error\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-property\"}),\"getInitialProps\"),\" = \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),\"(\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"{ res, err }\"),\") =>\"),` {\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"const\"),\" statusCode = res ? res.\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-property\"}),\"statusCode\"),\" : err ? err.\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-property\"}),\"statusCode\"),\" : \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"404\"),`;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"return\"),` { statusCode };\n}\n`)),mdx(AdSense,{mdxType:\"AdSense\"}),mdx(\"h2\",a({},{id:\"conclusion\"}),\"Conclusion\"),mdx(\"p\",null,\"You can customize all the error pages with one file, \",mdx(\"inlineCode\",{parentName:\"p\"},\"pages/_error.tsx\"),\", as below.\",mdx(\"br\",{parentName:\"p\"}),\"It works on both CSR(Client-Side Rendering) and SSR(Server-Side Rendering).\"),mdx(\"pre\",null,mdx(\"code\",a({parentName:\"pre\"},{className:\"hljs language-ts\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-comment\"}),\"// _error.tsx\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"import\"),\" { \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-title hljs-class\"}),\"NextPageContext\"),\" } \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"from\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"next\"'),`;\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"import\"),\" { \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-title hljs-class\"}),\"PageLayout\"),\" } \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"from\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-string\"}),'\"../my-components\"'),`;\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"interface\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-title hljs-class\"}),\"Props\"),` {\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-attr\"}),\"statusCode\"),\": \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-built_in\"}),\"number\"),`;\n}\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"export\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"default\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"function\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-title hljs-function\"}),\"Error\"),\"(\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-params\"}),\"{ statusCode }: Props\"),`) {\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"return\"),` (\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"xml\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-name\"}),\"PageLayout\"),\">\"),`\n      `,mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-tag\"}),\"<\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-name\"}),\"h1\"),\">\"),`\n        {/* CSR env: statusCode is 'undefined'\n            SSR env: statusCode has an error code */}\n        {!statusCode || statusCode === 404\n          ? \"404 - Page Not Found\"\n          : \\`An error \\${statusCode} occurred on server\\`}\n      `,mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-name\"}),\"h1\"),\">\"),`\n    `,mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-tag\"}),\"</\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-name\"}),\"PageLayout\"),\">\")),`\n  );\n}\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-title hljs-class\"}),\"Error\"),\".\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-property\"}),\"getInitialProps\"),\" = \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-function\"}),\"(\",mdx(\"span\",a({parentName:\"span\"},{className:\"hljs-params\"}),\"{ res, err }: NextPageContext\"),\") =>\"),` {\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"const\"),\" statusCode = res ? res.\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-property\"}),\"statusCode\"),\" : err ? err.\",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-property\"}),\"statusCode\"),\" : \",mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-number\"}),\"404\"),`;\n  `,mdx(\"span\",a({parentName:\"code\"},{className:\"hljs-keyword\"}),\"return\"),` { statusCode };\n};\n`)),mdx(\"h2\",a({},{id:\"reference\"}),\"Reference\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",a({parentName:\"li\"},{href:\"https://nextjs.org/docs/advanced-features/custom-error-page#404-page\"}),\"Custom Error Page\"))))}MDXContent.isMDXComponent=!0;\n","scope":{}}}},"__N_SSG":true}